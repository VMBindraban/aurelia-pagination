System.register("aurelia-pagination/utils.js",["github:aurelia/framework@0.16.0"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return function(t,r){function n(){return t[r]}return n.getObserver=function(){return e.getObserver(t,r)},{get:n}}}function n(e){return function(t,r){function n(){return r()}return n.getObserver=function(){return new h(n,t,e)},{get:n}}}function i(e){function t(t){Object.keys(t).forEach(function(r){return Reflect.defineProperty(e,r,t[r])})}var r=[];t({hasSubscribers:{get:function(){return function(){return r.length>0}}},addSubscriber:{get:function(){return function(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return null===n&&(n=e,e=null),r.push({callable:n,context:e}),function(){t.unsubscribe(e,n)}}}},callSubscribers:{get:function(){return function(e,t){r.forEach(function(r){var n=r.callable;return n(e,t)})}}}})}function o(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],n=null===t?{obj:e[0],root:!0}:t,i=null===t?1:0;null===t&&r.push(n),t=n;for(var a=i,s=e.length;s>a;a++){var u=e[a];if(Array.isArray(u)){for(var c=0,l=u.length;l>c;c++){var h=u[c];if(Array.isArray(h))o(h,t,r);else{var p={parent:t,prop:h,leaf:!0};r.push(p)}}t=null}else{if(null===t)throw new Error("Invalid dependency graph");var p={parent:t,prop:u};a===s-1&&(p.leaf=!0),r.push(p),t=p}}return r.filter(function(e){return e.leaf})}function a(e){return Reflect.apply(Array.prototype.concat,[],e)}function s(e,t,r){return function(e){var n=u(e,r);return n.subscribe(t.call.bind(t))}}function u(e,t){if(e.parent.root)return t.getObserver(e.parent.obj,e.prop);var r=u(e.parent,t);return new c(r,function(r){return r&&t.getObserver(r,e.prop)},r.getValue())}var c,l,h;return e("createForwardLookup",r),e("createForwardComputed",n),{setters:[function(e){c=e.PathObserver}],execute:function(){l="ComputedProxyPropertyObserver",h=function(){function e(r,n,s){t(this,e),this._getter=r,this._dependencies=a(n.map(function(e){return o(e)})),this._obsl=s,i(this)}return e.prototype.getValue=function(){return this._getter()},e.prototype.setValue=function(e){throw new Error("Value is readonly.")},e.prototype.call=function(e){var t=this.getValue();this._oldValue!==t&&(this.callSubscribers(t,this._oldValue),this._oldValue=t)},e.prototype.evaluate=function(){this.call()},e.prototype.subscribe=function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return this.hasSubscribers()||(this.oldValue=this.getValue(),this._subscriptions=this._dependencies.map(s(l,this,this._obsl))),this.addSubscriber(e,t)}),e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this._subscriptions.forEach(function(e){return e()})},e}()}}}),System.register("aurelia-pagination/paginated.js",["github:aurelia/framework@0.16.0","aurelia-pagination/utils.js"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,r){var n=r[t];if(n){var i={};for(var o in n)i[o]=n[o];i.value=i.initializer?i.initializer.call(e):void 0,Object.defineProperty(e,t,i)}}var n,i,o,a,s,u,c,l,h,p,f,g,d,m,v,b,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w=function(){function e(e,t,r){for(var n=0;n<t.length;n++){var i=t[n],o=i.decorators,a=i.key;if(delete i.key,delete i.decorators,i.enumerable=i.enumerable||!1,i.configurable=!0,("value"in i||i.initializer)&&(i.writable=!0),o){for(var s=0;s<o.length;s++){var u=o[s];if("function"!=typeof u)throw new TypeError("The decorator for method "+i.key+" is of the invalid type "+typeof u);i=u(e,a,i)||i}if(void 0!==i.initializer){r[a]=i;continue}}Object.defineProperty(e,a,i)}}return function(t,r,n,i,o){return r&&e(t.prototype,r,i),n&&e(t,n,o),t}}();return{setters:[function(e){n=e.customElement,i=e.processContent,o=e.bindable,a=e.noView,s=e.ViewSlot,u=e.ViewResources,c=e.ViewCompiler,l=e.inject,h=e.Container,p=e.ObserverLocator},function(e){f=e.createForwardLookup}],execute:function(){g=Symbol("ready"),d=Symbol("counter"),m=Symbol("prev"),v=Symbol("subscription"),b=function(){function e(e,n,i,o,a,s){var u=this;t(this,S),r(this,"controller",b),r(this,"pageSize",b),r(this,"page",b),this.data=[],this.model={ready:!1,numPages:0},this[g]=!1,this[d]=0,this.createForwardLookup=f(a),Reflect.defineProperty(this.model,"page",y({},this.createForwardLookup(this,"page"),{enumerable:!0,set:function(e){return u.page=e}}));for(var c=document.createDocumentFragment(),l=void 0;null!==(l=s.firstElementChild);)c.appendChild(l);this.viewFactory=i.compile(c,e),this.container=o,this.viewSlot=n}var b={};w(e,[{key:"controller",decorators:[o],initializer:null,enumerable:!0},{key:"pageSize",decorators:[o],initializer:function(){return 10},enumerable:!0},{key:"page",decorators:[o],initializer:function(){return 0},enumerable:!0}],null,b),e.prototype.reset=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=e.resetPage,r=void 0===t?!0:t;r&&(this.page=0),this[m]=null,this._process()},e.prototype.bind=function(e){var t=this;if("string"==typeof this.pageSize){var r=this.pageSize;if(this.pageSize=parseInt(this.pageSize,10),isNaN(this.pageSize))throw new Error("The string '"+r+"' given to page-size is not a number.")}this.controller?this[v]=this.controller.subscribe(function(e){return t.reset(e)}):this[v]=null;var n=Object.create(e,{$data:this.createForwardLookup(this,"data"),$model:this.createForwardLookup(this,"model"),$ready:this.createForwardLookup(this,"ready")}),i=this.viewFactory.create(this.container,n);this.viewSlot.add(i),this[g]=!0,this._process()},e.prototype.pageChanged=function(){this._process()},e.prototype.controllerChanged=function(){var e=this;this[v]&&(this[v](),this[v]=null),this.controller&&(this[v]=this.controller.subscribe(function(t){return e.reset(t)}))},e.prototype.unbind=function(){this[v]&&(this[v](),this[v]=null)},e.prototype._process=function(){var e=this,t=this[m]||{};if(t.page!==this.page||t.pageSize!==this.pageSize){var r=++this[d],n={page:this.page,pageSize:this.pageSize};this[m]=n,this.model.ready=!1,Promise.resolve(this.controller&&this.controller.getData(n)||[]).then(function(t){var n=t.data,i=t.numPages;r===e[d]&&(e.data=n,e.model.numPages=i,e.model.ready=!0)})}};var S=e;return e=l(u,s,c,h,p,Element)(e)||e,e=n("paginated")(e)||e,e=i(!1)(e)||e,e=a()(e)||e}(),e("PaginatedElement",b)}}}),System.register("aurelia-pagination/pagination-nav.js",["github:aurelia/framework@0.16.0","aurelia-pagination/utils.js"],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,r){var n=r[t];if(n){var i={};for(var o in n)i[o]=n[o];i.value=i.initializer?i.initializer.call(e):void 0,Object.defineProperty(e,t,i)}}var n,i,o,a,s,u,c,l,h,p,f,g,d,m,v=function(){function e(e,t,r){for(var n=0;n<t.length;n++){var i=t[n],o=i.decorators,a=i.key;if(delete i.key,delete i.decorators,i.enumerable=i.enumerable||!1,i.configurable=!0,("value"in i||i.initializer)&&(i.writable=!0),o){for(var s=0;s<o.length;s++){var u=o[s];if("function"!=typeof u)throw new TypeError("The decorator for method "+i.key+" is of the invalid type "+typeof u);i=u(e,a,i)||i}if(void 0!==i.initializer){r[a]=i;continue}}Object.defineProperty(e,a,i)}}return function(t,r,n,i,o){return r&&e(t.prototype,r,i),n&&e(t,n,o),t}}();return{setters:[function(e){n=e.customElement,i=e.processContent,o=e.bindable,a=e.noView,s=e.ViewSlot,u=e.ViewResources,c=e.ViewCompiler,l=e.inject,h=e.Container,p=e.ObserverLocator,f=e.declarePropertyDependencies},function(e){g=e.createForwardLookup,d=e.createForwardComputed}],execute:function(){m=function(){function e(e,n,i,o,a,s){t(this,m),r(this,"model",f),r(this,"rangeSize",f),this.navs=[],this.subscriptions=[],this.createForwardLookup=g(a),this.createForwardComputed=d(a);for(var u=document.createDocumentFragment(),c=void 0;null!==(c=s.firstElementChild);)u.appendChild(c);this.viewFactory=i.compile(u,e),this.container=o,this.viewSlot=n,this.obsl=a}var f={};v(e,[{key:"model",decorators:[o],initializer:null,enumerable:!0},{key:"rangeSize",decorators:[o],initializer:function(){return 3},enumerable:!0}],null,f),e.prototype.bind=function(e){var t=this;if("string"==typeof this.rangeSize){var r=this.rangeSize;if(this.rangeSize=parseInt(this.rangeSize,10),isNaN(this.rangeSize))throw new Error("The string '"+r+"' given to range-size is not a number.")}var n=Object.create(e,{$navs:this.createForwardLookup(this,"navs"),$go:{value:function(e){if("string"==typeof e)switch(e){case"prev":if(0===t.model.page)return;t.model.page=Math.max(t.model.page-1,0);break;case"next":if(t.model.page===t.model.numPages-1)return;t.model.page=Math.min(t.model.page+1,t.model.numPages);break;default:throw new Error("'"+e+"' is not a valid value for $go")}else 0>e?t.model.page=t.model.numPages+e:t.model.page=e}},$isLast:this.createForwardComputed([[this,"model",["page","numPages"]]],function(){return t.model.page===t.model.numPages-1}),$isFirst:this.createForwardComputed([[this,"model","page"]],function(){return 0===t.model.page})});this.modelChanged();var i=this.viewFactory.create(this.container,n);this.viewSlot.add(i)},e.prototype.modelChanged=function(){if(this.subscriptions.forEach(function(e){return e()}),this.subscriptions=[],this.model){var e=this.obsl.getObserver(this.model,"ready"),t=this.obsl.getObserver(this.model,"page");this.subscriptions.push(e.subscribe(this.readyChanged.bind(this))),this.subscriptions.push(t.subscribe(this.pageChanged.bind(this)))}},e.prototype.readyChanged=function(){this._generate()},e.prototype.pageChanged=function(){this._generate()},e.prototype._generate=function(){var e=this,t=[],r=this.model,n=r.page,i=r.numPages,o=Math.max(n-this.rangeSize,0),a=Math.min(n+this.rangeSize,i-1);n<this.rangeSize&&(a=Math.min(2*this.rangeSize,i-1)),n>i-this.rangeSize&&(o=i<this.rangeSize?0:Math.max(i-2*this.rangeSize,this.rangeSize));for(var s=function(r){t.push({text:(r+1).toString(),current:r===n,go:function(){e.model.page=r}})},u=o;a+1>u;u++)s(u);this.navs=t};var m=e;return e=l(u,s,c,h,p,Element)(e)||e,e=n("pagination-nav")(e)||e,e=i(!1)(e)||e,e=a()(e)||e}(),e("PaginationNavElement",m)}}}),System.register("aurelia-pagination/controller.js",[],function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,n,i;return{setters:[],execute:function(){r=Symbol("fetch"),n=Symbol("subscriptions"),i=function(){function e(i){t(this,e),this[r]=i,this[n]=[]}return e.prototype.getData=function(e){var t=e.page,n=e.pageSize;return this[r]({page:t,pageSize:n})},e.prototype.subscribe=function(e){var t=this;this[n].push(e);var r=!1;return function(){if(!r){r=!0;var i=t[n].indexOf(e);-1!==i&&t[n].splice(1)}}},e.prototype.reset=function(e){this[n].forEach(function(t){return t(e)})},e}(),e("PaginationController",i)}}}),System.register("aurelia-pagination/index.js",["aurelia-pagination/paginated.js","aurelia-pagination/pagination-nav.js","aurelia-pagination/controller.js"],function(e){"use strict";return{setters:[function(t){e("PaginatedElement",t.PaginatedElement)},function(t){e("PaginationNavElement",t.PaginationNavElement)},function(t){e("PaginationController",t.PaginationController)}],execute:function(){}}});